<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>FluxCloud Revenue Dashboard</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>

<h1>FluxCloud Revenue Overview</h1>

<p id="last-updated" style="color:#555; margin-bottom: 10px;">Last updated: –</p>

<a href="/logout" class="logout-link">Logout</a>

<button id="refresh-btn" style="margin-top:10px;">Refresh Data</button>
<p id="refresh-status" style="margin-bottom: 5px; color:#333;"></p>
<div id="spinner" class="hidden"></div>

<div id="loading">Loading data...</div>

<!-- TABS -->
<div class="tabs">
    <button class="tab-btn active" data-tab="general">General</button>
    <button class="tab-btn" data-tab="resources">Resources</button>
</div>

<!-- ========================= -->
<!-- GENERAL TAB CONTENT       -->
<!-- ========================= -->
<div id="tab-general" class="tab-content">

    <div id="content" class="hidden">

        <!-- MAIN METRICS -->
        <div class="stat-grid">

            <div class="stat-box">
                <h3>Total Applications</h3>
                <p id="total-apps">–</p>
            </div>

            <div class="stat-box">
                <h3>Marketplace Apps</h3>
                <p id="marketplace-apps">–</p>
            </div>

            <div class="stat-box">
                <h3>Custom Apps</h3>
                <p id="custom-apps">–</p>
            </div>

            <div class="stat-box">
                <h3>Unique Owners</h3>
                <p id="unique-owners">–</p>
            </div>

        </div>

        <!-- ADDITIONAL METRICS -->
        <h2>Additional Metrics</h2>

        <div class="stat-grid">

            <div class="stat-box">
                <h3>Marketplace %</h3>
                <p id="marketplace-pct">–</p>
            </div>

            <div class="stat-box">
                <h3>Custom %</h3>
                <p id="custom-pct">–</p>
            </div>

            <div class="stat-box">
                <h3>Total Instances</h3>
                <p id="total-instances">–</p>
            </div>

            <div class="stat-box">
                <h3>Company Deployments</h3>
                <p id="company-deployments">–</p>
            </div>

            <div class="stat-box">
                <h3>Company Instances</h3>
                <p id="company-instances">–</p>
            </div>

            <div class="stat-box">
                <h3>Marketplace w/ Contacts</h3>
                <p id="marketplace-with-contacts">–</p>
            </div>

            <div class="stat-box">
                <h3>Marketplace Contact %</h3>
                <p id="marketplace-contact-pct">–</p>
            </div>

            <div class="stat-box">
                <h3>Total w/ Contacts</h3>
                <p id="total-with-contacts">–</p>
            </div>

            <div class="stat-box">
                <h3>Total Contact %</h3>
                <p id="total-contact-pct">–</p>
            </div>

            <div class="stat-box">
                <h3>Custom w/ Contacts</h3>
                <p id="custom-with-contacts">–</p>
            </div>

            <div class="stat-box">
                <h3>Custom Contact %</h3>
                <p id="custom-contact-pct">–</p>
            </div>

            <div class="stat-box">
                <h3>Apps w/ Secrets</h3>
                <p id="total-with-secrets">–</p>
            </div>

            <div class="stat-box">
                <h3>Apps w/ Static IP</h3>
                <p id="total-with-staticip">–</p>
            </div>

            <div class="stat-box">
                <h3>Marketplace: Secrets</h3>
                <p id="marketplace-with-secrets">–</p>
            </div>

            <div class="stat-box">
                <h3>Marketplace: Static IP</h3>
                <p id="marketplace-with-staticip">–</p>
            </div>

        </div>

        <!-- TOP 5 -->
        <h2>Top 5 Marketplace Apps</h2>

        <table id="top5-table">
            <thead>
                <tr>
                    <th>App Name</th>
                    <th>Deployments</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

    </div>
</div>


<!-- ========================= -->
<!-- RESOURCES TAB CONTENT     -->
<!-- ========================= -->
<div id="tab-resources" class="tab-content hidden">

    <h2>Resources (App Usage)</h2>

    <div class="stat-grid">
        <div class="stat-box">
            <h3>Total CPU</h3>
            <p id="total-cpu">–</p>
        </div>

        <div class="stat-box">
            <h3>Total RAM</h3>
            <p id="total-ram">–</p>
        </div>

        <div class="stat-box">
            <h3>Total HDD</h3>
            <p id="total-hdd">–</p>
        </div>
    </div>

    <h2>Resource Usage by Tier</h2>

    <div class="stat-grid">
        <div class="stat-box">
            <h3>Cumulus Usage</h3>
            <p>Instances: <span id="rtu-cumulus-instances">–</span></p>
            <p>CPU: <span id="rtu-cumulus-cpu">–</span></p>
            <p>RAM: <span id="rtu-cumulus-ram">–</span></p>
            <p>HDD: <span id="rtu-cumulus-hdd">–</span></p>
        </div>

        <div class="stat-box">
            <h3>Nimbus Usage</h3>
            <p>Instances: <span id="rtu-nimbus-instances">–</span></p>
            <p>CPU: <span id="rtu-nimbus-cpu">–</span></p>
            <p>RAM: <span id="rtu-nimbus-ram">–</span></p>
            <p>HDD: <span id="rtu-nimbus-hdd">–</span></p>
        </div>

        <div class="stat-box">
            <h3>Stratus Usage</h3>
            <p>Instances: <span id="rtu-stratus-instances">–</span></p>
            <p>CPU: <span id="rtu-stratus-cpu">–</span></p>
            <p>RAM: <span id="rtu-stratus-ram">–</span></p>
            <p>HDD: <span id="rtu-stratus-hdd">–</span></p>
        </div>
    </div>

    <h2>Network Capacity (All Tiers)</h2>

    <div class="stat-grid">
        <div class="stat-box">
            <h3>Total Network CPU</h3>
            <p id="network-total-cpu">–</p>
        </div>

        <div class="stat-box">
            <h3>Total Network RAM</h3>
            <p id="network-total-ram">–</p>
        </div>

        <div class="stat-box">
            <h3>Total Network HDD</h3>
            <p id="network-total-hdd">–</p>
        </div>
    </div>

    <h2>Network Capacity by Tier</h2>

    <div class="stat-grid">
        <div class="stat-box">
            <h3>Cumulus Capacity</h3>
            <p>Nodes: <span id="network-cumulus-nodes">–</span></p>
            <p>CPU: <span id="network-cumulus-cpu">–</span></p>
            <p>RAM: <span id="network-cumulus-ram">–</span></p>
            <p>HDD: <span id="network-cumulus-hdd">–</span></p>
        </div>

        <div class="stat-box">
            <h3>Nimbus Capacity</h3>
            <p>Nodes: <span id="network-nimbus-nodes">–</span></p>
            <p>CPU: <span id="network-nimbus-cpu">–</span></p>
            <p>RAM: <span id="network-nimbus-ram">–</span></p>
            <p>HDD: <span id="network-nimbus-hdd">–</span></p>
        </div>

        <div class="stat-box">
            <h3>Stratus Capacity</h3>
            <p>Nodes: <span id="network-stratus-nodes">–</span></p>
            <p>CPU: <span id="network-stratus-cpu">–</span></p>
            <p>RAM: <span id="network-stratus-ram">–</span></p>
            <p>HDD: <span id="network-stratus-hdd">–</span></p>
        </div>
    </div>

    <h2>Network Utilization</h2>

    <div class="stat-grid">
        <div class="stat-box">
            <h3>CPU Utilization</h3>
            <p id="cpu-util-pct">–</p>
        </div>

        <div class="stat-box">
            <h3>RAM Utilization</h3>
            <p id="ram-util-pct">–</p>
        </div>

        <div class="stat-box">
            <h3>HDD Utilization</h3>
            <p id="hdd-util-pct">–</p>
        </div>
    </div>

    <!-- NEW: TIER UTILIZATION -->
    <h2>Tier Utilization</h2>

    <div class="stat-grid">
        <div class="stat-box">
            <h3>Cumulus Utilization</h3>
            <p>CPU: <span id="tier-util-cumulus-cpu">–</span></p>
            <p>RAM: <span id="tier-util-cumulus-ram">–</span></p>
            <p>HDD: <span id="tier-util-cumulus-hdd">–</span></p>
        </div>

        <div class="stat-box">
            <h3>Nimbus Utilization</h3>
            <p>CPU: <span id="tier-util-nimbus-cpu">–</span></p>
            <p>RAM: <span id="tier-util-nimbus-ram">–</span></p>
            <p>HDD: <span id="tier-util-nimbus-hdd">–</span></p>
        </div>

        <div class="stat-box">
            <h3>Stratus Utilization</h3>
            <p>CPU: <span id="tier-util-stratus-cpu">–</span></p>
            <p>RAM: <span id="tier-util-stratus-ram">–</span></p>
            <p>HDD: <span id="tier-util-stratus-hdd">–</span></p>
        </div>
    </div>

</div>

<script src="/static/app.js"></script>
</body>
</html>
